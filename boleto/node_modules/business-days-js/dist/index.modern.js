import t from"date-holidays";import e from"dayjs";import a from"dayjs/plugin/utc";import d from"dayjs/plugin/timezone";import s from"dayjs/plugin/customParseFormat";e.extend(a),e.extend(d),e.extend(s);const i=t=>{try{t=e.tz(t,"YYYY-MM-DD","America/New_York")}catch(t){throw t}return t};export default({state:e="US",excludeHolidays:a=[],addHolidays:d=[]}={})=>{const s=new t;((t,e)=>{let a=Object.keys(e.getStates("US"));if(a=[...a,"US","USA"],!a.includes(t.toUpperCase()))throw t+" is not a US state."})(e,s);const o=e.toUpperCase();return"US"===o||"USA"===o?s.init("US"):s.init("US",o),a.length>0&&((t,e)=>{e.forEach(e=>{const a=((t,e,a)=>{const d=t.getHolidays("2020").find(t=>t.name.toLowerCase()===e.toLowerCase());return d?d.rule:""})(t,e);a&&t.setHoliday(a,{name:e,type:"optional"})})})(s,a),d.length>0&&((t,e)=>{e.forEach(({rule:e,name:a})=>{if(!e||!a)throw"Custom holidays must include a rule and a name";t.setHoliday(e,{name:a,type:"public"})})})(s,d),{hd:s,USState:o,getHolidays(t){return this.hd.getHolidays(t).filter(t=>"public"===t.type)},check(t){const e=(t=i(t)).day();if(0===e||6===e)return!1;const a=this.hd.isHoliday(t.toDate());return!a||"public"!==a.type},addDays(t,e,{excludeInitialDate:a=!0}={}){let d=0;for(t=i(t),a&&(t=t.add(1,"day"));d<e;)this.check(t)&&d++,d<e&&(t=t.add(1,"day"));return t},countDays(t,e,{excludeInitialDate:a=!0}={}){if(t=i(t),e=i(e),t.isAfter(e))throw`${t} is after ${e}. Provide a start date that is earlier than end date in order to calculate days between`;let d=0,s=0,o=[],r=0,n=0,l=0,y=0,u=t;for(a&&(u=t.add(1,"day"));!u.isSame(e.add(1,"day"),"day");){d++;const t=this.hd.isHoliday(u.toDate()),e=u.day();t&&"public"===t.type&&(s++,o.push(t)),0===e|6===e&&r++,0===e|6===e||n++,0===e|6===e&&t&&"public"===t.type&&l++,0===e|6===e||t&&"public"===t.type||y++,u=u.add(1,"day")}return{totalDays:d,holidays:s,holidayList:o,weekdays:n,weekendDays:r,holidaysOnWeekends:l,businessDays:y,nonBusinessDays:d-y}}}};
//# sourceMappingURL=index.modern.js.map
