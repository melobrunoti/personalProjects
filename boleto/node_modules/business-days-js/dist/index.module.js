import t from"date-holidays";import e from"dayjs";import a from"dayjs/plugin/utc";import i from"dayjs/plugin/timezone";import o from"dayjs/plugin/customParseFormat";e.extend(a),e.extend(i),e.extend(o);var n=function(t){try{t=e.tz(t,"YYYY-MM-DD","America/New_York")}catch(t){throw t}return t};export default function(e){var a=void 0===e?{}:e,i=a.state,o=void 0===i?"US":i,d=a.excludeHolidays,r=void 0===d?[]:d,s=a.addHolidays,u=void 0===s?[]:s,y=new t;!function(t,e){var a=Object.keys(e.getStates("US"));if(!(a=[].concat(a,["US","USA"])).includes(t.toUpperCase()))throw t+" is not a US state."}(o,y);var c=o.toUpperCase();return"US"===c||"USA"===c?y.init("US"):y.init("US",c),r.length>0&&function(t,e){e.forEach(function(e){var a=function(t,e,a){var i=t.getHolidays("2020").find(function(t){return t.name.toLowerCase()===e.toLowerCase()});return i?i.rule:""}(t,e);a&&t.setHoliday(a,{name:e,type:"optional"})})}(y,r),u.length>0&&function(t,e){e.forEach(function(e){var a=e.rule,i=e.name;if(!a||!i)throw"Custom holidays must include a rule and a name";t.setHoliday(a,{name:i,type:"public"})})}(y,u),{hd:y,USState:c,getHolidays:function(t){return this.hd.getHolidays(t).filter(function(t){return"public"===t.type})},check:function(t){var e=(t=n(t)).day();if(0===e||6===e)return!1;var a=this.hd.isHoliday(t.toDate());return!a||"public"!==a.type},addDays:function(t,e,a){var i=(void 0===a?{}:a).excludeInitialDate,o=void 0===i||i,d=0;for(t=n(t),o&&(t=t.add(1,"day"));d<e;)this.check(t)&&d++,d<e&&(t=t.add(1,"day"));return t},countDays:function(t,e,a){var i=(void 0===a?{}:a).excludeInitialDate,o=void 0===i||i;if(t=n(t),e=n(e),t.isAfter(e))throw t+" is after "+e+". Provide a start date that is earlier than end date in order to calculate days between";var d=0,r=0,s=[],u=0,y=0,c=0,l=0,f=t;for(o&&(f=t.add(1,"day"));!f.isSame(e.add(1,"day"),"day");){d++;var p=this.hd.isHoliday(f.toDate()),h=f.day();p&&"public"===p.type&&(r++,s.push(p)),0===h|6===h&&u++,0===h|6===h||y++,0===h|6===h&&p&&"public"===p.type&&c++,0===h|6===h||p&&"public"===p.type||l++,f=f.add(1,"day")}return{totalDays:d,holidays:r,holidayList:s,weekdays:y,weekendDays:u,holidaysOnWeekends:c,businessDays:l,nonBusinessDays:d-l}}}}
//# sourceMappingURL=index.module.js.map
