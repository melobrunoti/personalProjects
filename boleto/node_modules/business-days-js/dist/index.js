function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("date-holidays")),a=e(require("dayjs")),i=e(require("dayjs/plugin/utc")),n=e(require("dayjs/plugin/timezone")),r=e(require("dayjs/plugin/customParseFormat"));a.extend(i),a.extend(n),a.extend(r);var d=function(e){try{e=a.tz(e,"YYYY-MM-DD","America/New_York")}catch(e){throw e}return e};module.exports=function(e){var a=void 0===e?{}:e,i=a.state,n=void 0===i?"US":i,r=a.excludeHolidays,o=void 0===r?[]:r,u=a.addHolidays,s=void 0===u?[]:u,c=new t;!function(e,t){var a=Object.keys(t.getStates("US"));if(!(a=[].concat(a,["US","USA"])).includes(e.toUpperCase()))throw e+" is not a US state."}(n,c);var l=n.toUpperCase();return"US"===l||"USA"===l?c.init("US"):c.init("US",l),o.length>0&&function(e,t){t.forEach(function(t){var a=function(e,t,a){var i=e.getHolidays("2020").find(function(e){return e.name.toLowerCase()===t.toLowerCase()});return i?i.rule:""}(e,t);a&&e.setHoliday(a,{name:t,type:"optional"})})}(c,o),s.length>0&&function(e,t){t.forEach(function(t){var a=t.rule,i=t.name;if(!a||!i)throw"Custom holidays must include a rule and a name";e.setHoliday(a,{name:i,type:"public"})})}(c,s),{hd:c,USState:l,getHolidays:function(e){return this.hd.getHolidays(e).filter(function(e){return"public"===e.type})},check:function(e){var t=(e=d(e)).day();if(0===t||6===t)return!1;var a=this.hd.isHoliday(e.toDate());return!a||"public"!==a.type},addDays:function(e,t,a){var i=(void 0===a?{}:a).excludeInitialDate,n=void 0===i||i,r=0;for(e=d(e),n&&(e=e.add(1,"day"));r<t;)this.check(e)&&r++,r<t&&(e=e.add(1,"day"));return e},countDays:function(e,t,a){var i=(void 0===a?{}:a).excludeInitialDate,n=void 0===i||i;if(e=d(e),t=d(t),e.isAfter(t))throw e+" is after "+t+". Provide a start date that is earlier than end date in order to calculate days between";var r=0,o=0,u=[],s=0,c=0,l=0,y=0,f=e;for(n&&(f=e.add(1,"day"));!f.isSame(t.add(1,"day"),"day");){r++;var h=this.hd.isHoliday(f.toDate()),p=f.day();h&&"public"===h.type&&(o++,u.push(h)),0===p|6===p&&s++,0===p|6===p||c++,0===p|6===p&&h&&"public"===h.type&&l++,0===p|6===p||h&&"public"===h.type||y++,f=f.add(1,"day")}return{totalDays:r,holidays:o,holidayList:u,weekdays:c,weekendDays:s,holidaysOnWeekends:l,businessDays:y,nonBusinessDays:r-y}}}};
//# sourceMappingURL=index.js.map
